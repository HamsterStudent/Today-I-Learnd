<!--@css(/universe/css/ducky-universe.css)-->
<!--@js(/asset/js/wheel-zoom.js)-->
<!--js(/universe/js/universe-common.js)-->



<div id="ducky-universe">

  <header class="universe-frames">
    <div class="frame top-box">
      <a href="#" class="button-nav">
        <div class="inner"></div>
      </a>

      <ul class="menu-list">
        <li>LIST</li>
        <li>LIST</li>
        <li>LIST</li>
        <li>LIST</li>
        <li>LIST</li>
      </ul>
    </div>
    <div class="frame left-box"></div>
    <div class="frame right-box"></div>
    <div class="frame bottom-box"></div>
  </header>

  <div class="modal-back"></div>
  <div class="modal">
    <div class="modal-close"></div>
    <div class="modal-content"></div>
  </div>


  <div id="panzoom-element" class="zoomContainer village-wrap">

    <div class="village">


      <section onclick="fetchPage('/universe/spa.html', 250, 500)" class="place spa-wrap">
        <h2 class="hidden">목욕탕</h2>
      </section>

      <section class="place doraemon-wrap">
        <h2 class="hidden">도라에몽</h2>
      </section>

      <section class="place pompompurin-restaurant-wrap">
        <h2 class="hidden">폼폼푸린 레스토랑</h2>
        <div class="pompom-shadow"></div>
      </section>

      <section class="place pingu-house-wrap">
        <h2 class="hidden">핑구집</h2>
      </section>

      <section class="place sticker-photo-booth-wrap">
        <h2 class="hidden">스티커사진</h2>
      </section>

      <section class="place name-sticker-wrap">
        <h2 class="hidden">스티커사진</h2>
      </section>

      <section class="place shinchan-wrap">
        <h2 class="hidden">짱구 집</h2>
      </section>

      <section class="place chiikawa-land-wrap">
        <h2 class="hidden">치이카와 랜드</h2>
      </section>

      <section class="place disney">
        <h2 class="hidden">디즈니 랜드</h2>
      </section>

      <section class="place sanrio-birthday-wrap">
        <h2 class="hidden">산리오 생일카페</h2>
      </section>

      <section class="place pat-mat-wrap">
        <h2 class="hidden">패트와매트</h2>
      </section>

      <section class="place spongebob-house-wrap">
        <h2 class="hidden">스폰지밥 집</h2>
      </section>

      <section class="place fish-bread-wrap">
        <h2 class="hidden">붕어빵 가판대</h2>
      </section>

      <section class="place manju-wrap">
        <h2 class="hidden">만쥬 가판대</h2>
      </section>

      <section class="place hbd-wrap">
        <h2 class="hidden">해피버스데이</h2>
      </section>

      <section class="place pompompurin-cafe-wrap">
        <div class="pompompurin-ear-01"></div>
        <div class="pompompurin-body"></div>
        <h2 class="hidden">폼폼푸린 카페</h2>
      </section>

      <section onclick="fetchPage('/universe/sanrio-land.html', 1280, 1130)" class="place sanrio-land-wrap">
        <h2 class="hidden">산리오 랜드</h2>
      </section>

      <section class="place ducky-lottery">
        <h2 class="hidden">가챠샵</h2>
      </section>

      <section class="place hospital-wrap">
        <h2 class="hidden">인형병원</h2>
      </section>

      <section class="place resin-wrap">
        <h2 class="hidden">레진샵</h2>
      </section>

      <section class="place poketmonster-wrap">
        <h2 class="hidden">포켓몬센터</h2>
      </section>

      <section class="place idol-birthday-cafe-wrap">
        <h2 class="hidden">아이돌 생일카페</h2>
      </section>

      <section class="place cake-shop-wrap">
        <h2 class="hidden">케이크샵</h2>
      </section>

      <section class="place full-moon-wrap">
        <h2 class="hidden">달빛천사</h2>
      </section>

      <section class="place candle-wrap">
        <h2 class="hidden">캔들</h2>
      </section>

      <section class="place shugo-chara-wrap">
        <h2 class="hidden">캐릭캐릭체인지</h2>
      </section>

      <section class="place toy-story-wrap">
        <h2 class="hidden">토이스토리</h2>
      </section>

      <section class="place gacha-shop-wrap">
        <h2 class="hidden">가챠샵</h2>
      </section>

      <section class="place market-wrap">
        <h2 class="hidden">마켓</h2>
      </section>

      <section class="place lottery-ticket-wrap">
        <h2 class="hidden">네잎복권</h2>
      </section>

      <section class="place adballoon-wrap">
        <h2 class="hidden">애드벌룬</h2>
      </section>

      <section class="place mass-production-mine-wrap">
        <h2 class="hidden">양산형 지뢰계</h2>
      </section>

      <section class="place sanrio-prop-shop-wrap">
        <h2 class="hidden">산리오 소품샵</h2>
      </section>

      <section class="place wallace-gromit-wrap">
        <h2 class="hidden">월래스와 그로밋</h2>
      </section>

      <section class="place snack-shop-wrap">
        <h2 class="hidden">더키분식</h2>
      </section>

      <section class="place clothes-shop-wrap">
        <h2 class="hidden">옷가게</h2>
      </section>

      <section class="place disney-shop-wrap">
        <h2 class="hidden">디즈니샵</h2>
      </section>

      <section class="place stuffed-trip-wrap">
        <h2 class="hidden">여행사</h2>
      </section>



      <div class="character"></div>

    </div>

  </div>

  <div class="size-control-wrap">
    <div class="direction-control-wrap">
      <div class="top-btn"></div>
      <div class="bottom-btn"></div>
      <div class="left-btn"></div>
      <div class="right-btn"></div>
    </div>
    <div class="zoom-btn-wrap">
      <div class="zoomin-btn"></div>
      <div class="zoomout-btn"></div>
    </div>

    <div class="card-btn-wrap">
      <div class="card-login-btn">로그인</div>
      <div class="card-register-btn">회원가입</div>
    </div>
  </div>



</div>


<script src="https://unpkg.com/@panzoom/panzoom@4.4.4/dist/panzoom.min.js"></script>

<script type="text/javascript">


  (() => {
    villageSize();
    clickModal();
    navClickEvent();
    placeClickEvent();

    const elem = document.getElementById('panzoom-element')
    const panzoom = Panzoom(elem, {
      maxScale: 5,
      contain: 'outside',
      startScale: 0.5,
      cursor: "url('/asset/ducky-universe/cursor/cute-duckie.cur'), auto"
    });

    document.querySelector('.zoomin-btn').addEventListener('click', panzoom.zoomIn)
    document.querySelector('.zoomout-btn').addEventListener('click', panzoom.zoomOut)
    document.querySelector('.right-btn').addEventListener('click', panzoom.reset)


    elem.parentElement.addEventListener('wheel', panzoom.zoomWithWheel)


    console.log(panzoom)



  })();

  function villageSize() {
    const villageWrap = document.querySelector('.village-wrap')
    window.addEventListener('load', villageResize)
    window.addEventListener('resize', villageResize)

    function villageResize(){
      villageWrap.style.height = villageWrap.clientWidth * 0.711111111111111 + "px"
    }

  }

  function clickModal(){
    const eachPlace = document.querySelectorAll('.place')
    const modal = document.querySelector('.modal')
    const modalBack = document.querySelector('.modal-back')
    const closeBtn = document.querySelector('.modal-close')

    for(const item of eachPlace){
      item.addEventListener('click', modalPopup)
    }

    closeBtn.addEventListener('click', modalClose)
    modalBack.addEventListener('click', modalClose)

    function modalPopup(){

      if(modal.style.display == 'block'){
        return false;
      }else{
        modal.style.display = 'block'
        modalBack.style.display = 'block'

        modal.animate([
          { transform: 'scale(0.98, 0.98)' },
          { transform: 'scale(1.05, 1.05)' },
          { transform: 'scale(1, 1)' }
        ], {
          duration: 300,
          easing: "ease-in-out"
        }).onfinish =()=>{
          modal.style.display = 'block'
        }

        // modalBack.animate([
        //   { width: "0" },
        //   { width: "100%" }
        // ], {
        //   duration: 300,
        //   easing: "ease-in-out"
        // }).onfinish =()=>{
        //   modalBack.style.display = 'block'
        // }


      }
    }

    function modalClose(){
      modal.style.display = 'none'
      modalBack.style.display = 'none'
    }

  }

  function fetchPage(name, modalWidth, modalHeight){
    const modal = document.querySelector('.modal')
    const modalContent = document.querySelector('.modal-content')

    fetch(name).then(function(response){
      response.text().then(function(text){
      modalContent.innerHTML = text;
      // 모달포지션조정
      modal.style.left = "calc(50% - " + modalWidth/2 + "px )"
      modal.style.top = "calc(50% - " + modalHeight/2 + "px )"

      })
    })

  }

  function navClickEvent(){
    const hamBurger = document.querySelector('.button-nav');
    const navLi = document.querySelectorAll('.menu-list li');
    const navList = document.querySelector('.menu-list')

    hamBurger.addEventListener('click', (e)=>{
      e.preventDefault();
      hamBurger.classList.add('button-close')
      dropDownList();
    })

    function dropDownList(){
      var num = 0;
      for(let i = 0; i < navLi.length; i++){
        if(navLi[i].style.opacity == '1'){
          navLi[i].animate([
            { opacity: 1, transform: 'translateY(0)'},
            { opacity: 0, transform: 'translateY(-50px)'}
          ],{
            duration: 200 + ( 200 * i ),
            easing: "ease-out"
          }).onfinish =()=>{
            navLi[i].style.opacity = "0"
            hamBurger.classList.remove('button-close')
          }
        }else{
          navLi[i].animate([
            { opacity: 0, transform: 'translateY(-50px)'},
            { opacity: 1, transform: 'translateY(0)'}
          ],{
            duration: 200 + ( 200 * i ),
            easing: "ease-out"
          }).onfinish =()=>{
            navLi[i].style.opacity = "1"
          }
        }

      }
    }
  }

  function placeClickEvent(){
    const eachPlace = document.querySelectorAll('.place')

    for(const item of eachPlace){
      item.addEventListener('click', zoomIn)
    }

    function zoomIn(){
      this.style.zoom = '200%';
    }

  }







</script>
